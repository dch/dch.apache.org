<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter&nbsp;8.&nbsp;CouchDB API Server Design Document Methods</title><link href="html.css" type="text/css" rel="stylesheet"><meta content="DocBook XSL Stylesheets V1.76.1" name="generator"><link rel="home" href="index.html" title="CouchDB 1.1 Manual"><link rel="up" href="index.html" title="CouchDB 1.1 Manual"><link rel="prev" href="couchdb-api-localdb.html" title="Chapter&nbsp;7.&nbsp;CouchDB API Server Local (non-replicating) Document Methods"><link rel="next" href="couchdb-api-misc.html" title="Chapter&nbsp;9.&nbsp;CouchDB API Server Miscellaneous Methods"><meta name="date" content="2012-04-17T23:46:58+00:00"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">Chapter&nbsp;8.&nbsp;CouchDB API Server Design Document Methods</th></tr><tr><td align="left" width="20%"><a accesskey="p" href="couchdb-api-localdb.html">Prev</a>&nbsp;</td><th align="center" width="60%">&nbsp;</th><td align="right" width="20%">&nbsp;<a accesskey="n" href="couchdb-api-misc.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter&nbsp;8.&nbsp;CouchDB API Server Design Document Methods"><div class="titlepage"><div><div><h2 class="title"><a name="couchdb-api-design"></a>Chapter&nbsp;8.&nbsp;CouchDB API Server Design Document Methods</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc_get">8.1. <code class="literal">GET /db/_design/design-doc</code></a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc_put">8.2. <code class="literal">PUT /db/_design/design-doc</code></a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc_delete">8.3. <code class="literal">DELETE /db/_design/design-doc</code></a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc_copy">8.4. <code class="literal">COPY /db/_design/design-doc</code></a></span></dt><dd><dl><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc_copy-simple">8.4.1. Copying a Design Document</a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc_copy-specrev">8.4.2. Copying from a Specific Revision</a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc_copy-existing">8.4.3. Copying to an Existing Design Document</a></span></dt></dl></dd><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-attachment_get">8.5. <code class="literal">GET /db/_design/design-doc/attachment</code></a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-attachment_put">8.6. <code class="literal">PUT /db/_design/design-doc/attachment</code></a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-attachment_delete">8.7. <code class="literal">DELETE /db/_design/design-doc/attachment</code></a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-info_get">8.8. <code class="literal">GET /db/_design/design-doc/_info</code></a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-view-viewname_get">8.9. <code class="literal">GET /db/_design/design-doc/_view/view-name</code></a></span></dt><dd><dl><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-view-viewname_get-indexes">8.9.1. Querying Views and Indexes</a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-view-viewname_get-sorting">8.9.2. Sorting Returned Rows</a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-view-viewname_get-ranges">8.9.3. Specifying Start and End Values</a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-view-viewname_get-limit">8.9.4. Using Limits and Skipping Rows</a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-view-viewname_get-reduction">8.9.5. View Reduction and Grouping</a></span></dt></dl></dd><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-view-viewname_post">8.10. <code class="literal">POST /db/_design/design-doc/_view/view-name</code></a></span></dt><dd><dl><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-view-viewname_post-multidoc">8.10.1. Multi-document Fetching</a></span></dt></dl></dd><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-show-showname_get">8.11. <code class="literal">POST /db/_design/design-doc/_show/show-name</code></a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-show-showname-doc_get">8.12. <code class="literal">POST /db/_design/design-doc/_show/show-name/doc</code></a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-list-listname-otherdesigndoc-viewname_get">8.13. <code class="literal">GET
      /db/_design/design-doc/_list/list-name/other-design-doc/view-name</code></a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-list-listname-otherdesigndoc-viewname_post">8.14. <code class="literal">POST
      /db/_design/design-doc/_list/list-name/other-design-doc/view-name</code></a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-list-listname-viewname_get">8.15. <code class="literal">GET /db/_design/design-doc/_list/list-name/view-name</code></a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-list-listname-viewname_post">8.16. <code class="literal">POST /db/_design/design-doc/_list/list-name/view-name</code></a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-update-updatename-doc_put">8.17. <code class="literal">PUT /db/_design/design-doc/_update/updatename/doc</code></a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-update-updatename_post">8.18. <code class="literal">POST /db/_design/design-doc/_update/updatename</code></a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-rewrite-rewritename-anything">8.19. <code class="literal">ALL
      /db/_design/design-doc/_rewrite/rewrite-name/anything</code></a></span></dt></dl></div><p>
    In CouchDB, design documents provide the main interface for building
    a CouchDB application. The design document defines the views used to
    extract information from CouchDB through one or more views. Design
    documents are created within your CouchDB instance in the same way
    as you create database documents, but the content and definition of
    the documents is different. Design Documents are named using an ID
    defined with the design document URL path, and this URL can then be
    used to access the database contents.
  </p><p>
    Views and lists operate together to provide automated (and
    formatted) output from your database.
  </p><p>
    A list of the available methods and URL paths are provided below:
  </p><div class="table"><a name="table-couchdb-api-design-summary"></a><p class="title"><b>Table&nbsp;8.1.&nbsp;Design Document API Calls</b></p><div class="table-contents"><table summary="Design Document API Calls" border="1"><colgroup><col class="method" width="33%"><col class="path" width="33%"><col class="desc" width="34%"></colgroup><thead><tr><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_design/design-doc</code></td><td><a class="link" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc_get" title="8.1.&nbsp;GET /db/_design/design-doc">
 Returns the latest revision of the design document
 </a></td></tr><tr><td><code class="literal">PUT</code></td><td><code class="literal">/db/_design/design-doc</code></td><td><a class="link" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc_put" title="8.2.&nbsp;PUT /db/_design/design-doc">
 Creates or updates a design document
 </a></td></tr><tr><td><code class="literal">DELETE</code></td><td><code class="literal">/db/_design/design-doc</code></td><td><a class="link" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc_delete" title="8.3.&nbsp;DELETE /db/_design/design-doc">
 Deletes the design document
 </a></td></tr><tr><td><code class="literal">COPY</code></td><td><code class="literal">/db/_design/design-doc</code></td><td><a class="link" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc_copy" title="8.4.&nbsp;COPY /db/_design/design-doc">
 Copies the design document
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_design/design-doc/_info</code></td><td><a class="link" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-info_get" title="8.8.&nbsp;GET /db/_design/design-doc/_info">
 Returns information about the design document
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_design/design-doc/_list/list-name/other-design-doc/view-name</code></td><td><a class="link" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-list-listname-otherdesigndoc-viewname_get" title="8.13.&nbsp;GET /db/_design/design-doc/_list/list-name/other-design-doc/view-name">
 Invokes the list handler to translate the given view results
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/db/_design/design-doc/_list/list-name/other-design-doc/view-name</code></td><td><a class="link" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-list-listname-otherdesigndoc-viewname_post" title="8.14.&nbsp;POST /db/_design/design-doc/_list/list-name/other-design-doc/view-name">
 Invokes the list handler to translate the given view results for
 certain documents
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_design/design-doc/_list/list-name/view-name</code></td><td><a class="link" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-list-listname-viewname_get" title="8.15.&nbsp;GET /db/_design/design-doc/_list/list-name/view-name">
 Invokes the list handler to translate the given view results
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/db/_design/design-doc/_list/list-name/view-name</code></td><td><a class="link" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-list-listname-viewname_post" title="8.16.&nbsp;POST /db/_design/design-doc/_list/list-name/view-name">
 Invokes the list handler to translate the given view results for
 certain documents
 </a></td></tr><tr><td><code class="literal">ALL</code></td><td><code class="literal">/db/_design/design-doc/_rewrite/rewrite-name/anything</code></td><td><a class="link" href="">
 Invokes the URL rewrite handler and processes the request after
 rewriting
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_design/design-doc/_show/show-name</code></td><td><a class="link" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-show-showname_get" title="8.11.&nbsp;POST /db/_design/design-doc/_show/show-name">
 Invokes the show handler without a document
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_design/design-doc/_show/show-name/doc</code></td><td><a class="link" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-show-showname-doc_get" title="8.12.&nbsp;POST /db/_design/design-doc/_show/show-name/doc">
 Invokes the show handler for the given document
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/db/_design/design-doc/_update/update-name</code></td><td><a class="link" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-update-updatename_post" title="8.18.&nbsp;POST /db/_design/design-doc/_update/updatename">
 Invokes the update handler without a document ID
 </a></td></tr><tr><td><code class="literal">PUT</code></td><td><code class="literal">/db/_design/design-doc/_update/update-name/doc</code></td><td><a class="link" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-update-updatename-doc_put" title="8.17.&nbsp;PUT /db/_design/design-doc/_update/updatename/doc">
 Invokes the update handler with a specific document ID
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_design/design-doc/_view/view-name</code></td><td><a class="link" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-view-viewname_get" title="8.9.&nbsp;GET /db/_design/design-doc/_view/view-name">
 Returns results of the view
 </a></td></tr><tr><td><code class="literal">POST</code></td><td><code class="literal">/db/_design/design-doc/_view/view-name</code></td><td><a class="link" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-view-viewname_post" title="8.10.&nbsp;POST /db/_design/design-doc/_view/view-name">
 Returns certain rows from the view
 </a></td></tr><tr><td><code class="literal">GET</code></td><td><code class="literal">/db/_design/design-doc/attachment</code></td><td><a class="link" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-attachment_get" title="8.5.&nbsp;GET /db/_design/design-doc/attachment">
 Gets an attachment of the design document
 </a></td></tr><tr><td><code class="literal">PUT</code></td><td><code class="literal">/db/_design/design-doc/attachment</code></td><td><a class="link" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-attachment_put" title="8.6.&nbsp;PUT /db/_design/design-doc/attachment">
 Inserts an attachment to the design document
 </a></td></tr><tr><td><code class="literal">DELETE</code></td><td><code class="literal">/db/_design/design-doc/attachment</code></td><td><a class="link" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-attachment_delete" title="8.7.&nbsp;DELETE /db/_design/design-doc/attachment">
 Deletes an attachment from the design document
 </a></td></tr></tbody></table></div></div><br class="table-break"><div class="section" title="8.1.&nbsp;GET /db/_design/design-doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc_get"></a>8.1.&nbsp;<code class="literal">GET /db/_design/design-doc</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/_design/design-doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_design/design-doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the existing design document
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Specify the revision to return
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">revs</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return a list of the revisions for the document
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Supported Values</strong></span></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&nbsp;</td><td><code class="literal">true</code></td><td>Includes the revisions</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">revs_info</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return a list of detailed revision information for the
 document
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Supported Values</strong></span></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&nbsp;</td><td><code class="literal">true</code></td><td>Includes the revisions</td></tr></tbody></table></div><p>
      Returns the specified design document,
      <code class="literal">design-doc</code> from the specified
      <code class="literal">db</code>. For example, to retrieve the design
      document <code class="literal">recipes</code> you would send the following
      request:
    </p><pre class="programlisting">GET http://couchdb:5984/recipes/_design/recipes
Content-Type: application/json</pre><p>
      The returned string will be the JSON of the design document:
    </p><pre class="programlisting">{
   "_id" : "_design/recipes",
   "_rev" : "5-39f56a392b86bbee57e2138921346406"
   "language" : "javascript",
   "views" : {
      "by_recipe" : {
         "map" : "function(doc) { if (doc.title != null) emit(doc.title, doc) }"
      },
   },
}</pre><p>
      A list of the revisions can be obtained by using the
      <code class="literal">revs</code> query argument, or an extended list of
      revisions using the <code class="literal">revs_info</code> query argument.
      This operates in the same way as for other documents. Fur further
      examples, see
      <a class="xref" href="couchdb-api-dbdoc.html#couchdb-api-dbdoc_db-doc_get" title="6.2.&nbsp;GET /db/doc">Section&nbsp;6.2, &ldquo;<code class="literal">GET /db/doc</code>&rdquo;</a>.
    </p></div><div class="section" title="8.2.&nbsp;PUT /db/_design/design-doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc_put"></a>8.2.&nbsp;<code class="literal">PUT /db/_design/design-doc</code></h2></div></div></div><div class="informaltable"><table summary="URL API PUT /db/_design/design-doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">PUT /db/_design/design-doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 JSON of the design document
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON status
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p>
      Upload the specified design document,
      <code class="literal">design-doc</code>, to the specified database. The
      design document should follow the definition of a design document,
      as summarised in the following table.
    </p><div class="table"><a name="table-couchdb-api-json-designdoc"></a><p class="title"><b>Table&nbsp;8.2.&nbsp;
 Design Document
 </b></p><div class="table-contents"><table summary="
 Design Document
 " border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">_id</code>  </td><td>
 Design Document ID
 </td></tr><tr><td><code class="literal">_rev</code>  </td><td>
 Design Document Revision
 </td></tr><tr><td><code class="literal">views</code>  </td><td>
 View
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">viewname</code>  </td><td>
 View Definition
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">map</code>  </td><td>
 Map Function for View
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">reduce</code> (optional) </td><td>
 Reduce Function for View
 </td></tr></tbody></table></div></div><br class="table-break"><p>
      For more information on writing views, see
      <a class="xref" href="">???</a>.
    </p></div><div class="section" title="8.3.&nbsp;DELETE /db/_design/design-doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc_delete"></a>8.3.&nbsp;<code class="literal">DELETE /db/_design/design-doc</code></h2></div></div></div><div class="informaltable"><table summary="URL API DELETE /db/_design/design-doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">DELETE /db/_design/design-doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of deleted design document
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Current revision of the document for validation
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td><span class="bold"><strong>HTTP Headers</strong></span></td><td><span class="bold"><strong>Header</strong></span></td><td><code class="literal">If-Match</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>Current revision of the document for validation</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>409</td><td colspan="2">
 Supplied revision is incorrect or missing
 </td></tr></tbody></table></div><p>
      Delete an existing design document. Deleting a design document
      also deletes all of the associated view indexes, and recovers the
      corresponding space on disk for the indexes in question.
    </p><p>
      To delete, you must specify the current revision of the design
      document using the <code class="literal">rev</code> query argument.
    </p><p>
      For example:
    </p><pre class="programlisting">DELETE http://couchdb:5984/recipes/_design/recipes?rev=2-ac58d589b37d01c00f45a4418c5a15a8
Content-Type: application/json</pre><p>
      The response contains the delete document ID and revision:
    </p><pre class="programlisting">{
   "id" : "recipe/_design/recipes"
   "ok" : true,
   "rev" : "3-7a05370bff53186cb5d403f861aca154",
}</pre></div><div class="section" title="8.4.&nbsp;COPY /db/_design/design-doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc_copy"></a>8.4.&nbsp;<code class="literal">COPY /db/_design/design-doc</code></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc_copy-simple">8.4.1. Copying a Design Document</a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc_copy-specrev">8.4.2. Copying from a Specific Revision</a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc_copy-existing">8.4.3. Copying to an Existing Design Document</a></span></dt></dl></div><div class="informaltable"><table summary="URL API COPY /db/_design/design-doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">COPY /db/_design/design-doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the copied document and revision
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Revision to copy from
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td><span class="bold"><strong>HTTP Headers</strong></span></td><td><span class="bold"><strong>Header</strong></span></td><td><code class="literal">Destination</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>Destination document (and optional revision)</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>no</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></div><p>
      The <code class="literal">COPY</code> command (non-standard HTTP) copies an
      existing design document to a new or existing document.
    </p><p>
      The source design document is specified on the request line, with
      the <code class="literal">Destination</code> HTTP Header of the request
      specifying the target document.
    </p><div class="section" title="8.4.1.&nbsp;Copying a Design Document"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-design_db-design-designdoc_copy-simple"></a>8.4.1.&nbsp;Copying a Design Document</h3></div></div></div><p>
        To copy the latest version of a design document to a new
        document you specify the base document and target document:
      </p><pre class="programlisting">COPY http://couchdb:5984/recipes/_design/recipes
Content-Type: application/json
Destination: /recipes/_design/recipelist</pre><p>
        The above request copies the design document
        <code class="literal">recipes</code> to the new design document
        <code class="literal">recipelist</code>. The response is the ID and
        revision of the new document.
      </p><pre class="programlisting">{
   "id" : "recipes/_design/recipelist"
   "rev" : "1-9c65296036141e575d32ba9c034dd3ee",
}</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          Copying a design document does automatically reconstruct the
          view indexes. These will be recreated, as with other views,
          the first time the new view is accessed.
        </p></div></div><div class="section" title="8.4.2.&nbsp;Copying from a Specific Revision"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-design_db-design-designdoc_copy-specrev"></a>8.4.2.&nbsp;Copying from a Specific Revision</h3></div></div></div><p>
        To copy <span class="emphasis"><em>from</em></span> a specific version, use the
        <code class="literal">rev</code> argument to the query string:
      </p><pre class="programlisting">COPY http://couchdb:5984/recipes/_design/recipes?rev=1-e23b9e942c19e9fb10ff1fde2e50e0f5
Content-Type: application/json
Destination: recipes/_design/recipelist</pre><p>
        The new design document will be created using the specified
        revision of the source document.
      </p></div><div class="section" title="8.4.3.&nbsp;Copying to an Existing Design Document"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-design_db-design-designdoc_copy-existing"></a>8.4.3.&nbsp;Copying to an Existing Design Document</h3></div></div></div><p>
        To copy to an existing document, you must specify the current
        revision string for the target document, using the
        <code class="literal">rev</code> parameter to the
        <code class="literal">Destination</code> HTTP Header string. For example:
      </p><pre class="programlisting">COPY http://couchdb:5984/recipes/_design/recipes
Content-Type: application/json
Destination: recipes/_design/recipelist?rev=1-9c65296036141e575d32ba9c034dd3ee</pre><p>
        The return value will be the new revision of the copied
        document:
      </p><pre class="programlisting">{
   "id" : "recipes/_design/recipes"
   "rev" : "2-55b6a1b251902a2c249b667dab1c6692",
}</pre></div></div><div class="section" title="8.5.&nbsp;GET /db/_design/design-doc/attachment"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-attachment_get"></a>8.5.&nbsp;<code class="literal">GET /db/_design/design-doc/attachment</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/_design/design-doc/attachment" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_design/design-doc/attachment</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Document content
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p>
      Returns the file attachment <code class="literal">attachment</code>
      associated with the design document
      <code class="literal">/_design_/design-doc</code>. The raw data of the
      associated attachment is returned (just as if you were accessing a
      static file. The returned HTTP <code class="literal">Content-type</code>
      will be the same as the content type set when the document
      attachment was submitted into the database.
    </p></div><div class="section" title="8.6.&nbsp;PUT /db/_design/design-doc/attachment"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-attachment_put"></a>8.6.&nbsp;<code class="literal">PUT /db/_design/design-doc/attachment</code></h2></div></div></div><div class="informaltable"><table summary="URL API PUT /db/_design/design-doc/attachment" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">PUT /db/_design/design-doc/attachment</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 JSON of the design document
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON status statement
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Current revision of the document for validation
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td><span class="bold"><strong>HTTP Headers</strong></span></td><td><span class="bold"><strong>Header</strong></span></td><td><code class="literal">If-Match</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>Current revision of the document for validation</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></div><p>
      Upload the supplied content as an attachment to the specified
      design document (<code class="literal">/_design/design-doc</code>). The
      <code class="literal">attachment</code> name provided must be a URL encoded
      string. You must also supply either the <code class="literal">rev</code>
      query argument or the <code class="literal">If-Match</code> HTTP header for
      validation, and the HTTP headers (to set the attacment content
      type). The content type is used when the attachment is requested
      as the corresponding content-type in the returned document header.
    </p><p>
      For example, you could upload a simple text document using the
      following request:
    </p><pre class="programlisting">PUT http://couchdb:5984/recipes/_design/recipes/view.css?rev=7-f7114d4d81124b223283f3e89eee043e
Content-Length: 39
Content-Type: text/plain

div.recipetitle {
font-weight: bold;
}</pre><p>
      Or by using the <code class="literal">If-Match</code> HTTP header:
    </p><pre class="programlisting">PUT http://couchdb:5984/recipes/FishStew/basic
If-Match: 7-f7114d4d81124b223283f3e89eee043e
Content-Length: 39
Content-Type: text/plain

div.recipetitle {
font-weight: bold;
}</pre><p>
      The returned JSON contains the new document information:
    </p><pre class="programlisting">{
   "id" : "_design/recipes"
   "ok" : true,
   "rev" : "8-cb2b7d94eeac76782a02396ba70dfbf5",
}</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
        Uploading an attachment updates the corresponding document
        revision. Revisions are tracked for the parent document, not
        individual attachments.
      </p></div></div><div class="section" title="8.7.&nbsp;DELETE /db/_design/design-doc/attachment"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-attachment_delete"></a>8.7.&nbsp;<code class="literal">DELETE /db/_design/design-doc/attachment</code></h2></div></div></div><div class="informaltable"><table summary="URL API DELETE /db/_design/design-doc/attachment" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">DELETE /db/_design/design-doc/attachment</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the deleted revision
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">rev</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Current revision of the document for validation
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td><span class="bold"><strong>HTTP Headers</strong></span></td><td><span class="bold"><strong>Header</strong></span></td><td><code class="literal">If-Match</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>Current revision of the document for validation</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td colspan="3"><span class="bold"><strong>Return Codes</strong></span></td></tr><tr><td>409</td><td colspan="2">
 Supplied revision is incorrect or missing
 </td></tr></tbody></table></div><p>
      Deletes the attachment <code class="literal">attachment</code> to the
      specified <code class="literal">_design/design-doc</code>. You must supply
      the <code class="literal">rev</code> argument with the current revision to
      delete the attachment.
    </p><p>
      For example to delete the attachment <code class="literal">view.css</code>
      from the design document <code class="literal">recipes</code>:
    </p><pre class="programlisting">DELETE http://couchdb:5984/recipes/_design/recipes/view.css?rev=9-3db559f13a845c7751d407404cdeaa4a</pre><p>
      The returned JSON contains the updated revision information for
      the parent document:
    </p><pre class="programlisting">{
   "id" : "_design/recipes"
   "ok" : true,
   "rev" : "10-f3b15bb408961f8dcc3d86c7d3b54c4c",
}</pre></div><div class="section" title="8.8.&nbsp;GET /db/_design/design-doc/_info"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-info_get"></a>8.8.&nbsp;<code class="literal">GET /db/_design/design-doc/_info</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/_design/design-doc/_info" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_design/design-doc/_info</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the design document information
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p>
      Obtains information about a given design document, including the
      index, index size and current status of the design document and
      associated index information.
    </p><p>
      For example, to get the information for the
      <code class="literal">recipes</code> design document:
    </p><pre class="programlisting">GET http://couchdb:5984/recipes/_design/recipes/_info
Content-Type: application/json</pre><p>
      This returns the following JSON structure:
    </p><pre class="programlisting">{
   "name" : "recipes"
   "view_index" : {
      "compact_running" : false,
      "updater_running" : false,
      "language" : "javascript",
      "purge_seq" : 10,
      "waiting_commit" : false,
      "waiting_clients" : 0,
      "signature" : "fc65594ee76087a3b8c726caf5b40687",
      "update_seq" : 375031,
      "disk_size" : 16491
   },
}</pre><p>
      The individual fields in the returned JSON structure are detailed
      in
      <a class="xref" href="couchdb-api-design.html#table-couchdb-api-design_db-designdoc-info-json" title="Table&nbsp;8.3.&nbsp;Design Document Info JSON Contents">Table&nbsp;8.3, &ldquo;Design Document Info JSON Contents&rdquo;</a>.
    </p><div class="table"><a name="table-couchdb-api-design_db-designdoc-info-json"></a><p class="title"><b>Table&nbsp;8.3.&nbsp;Design Document Info JSON Contents</b></p><div class="table-contents"><table summary="Design Document Info JSON Contents" border="1"><colgroup><col class="item" width="30%"><col class="desc" width="70%"></colgroup><tbody><tr><td><span class="bold"><strong>Field</strong></span></td><td><span class="bold"><strong>Description</strong></span></td></tr><tr><td><code class="literal">name</code>  </td><td>
 Name/ID of Design Document
 </td></tr><tr><td><code class="literal">view_index</code>  </td><td>
 View Index
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">compact_running</code>  </td><td>
 Indicates whether a compaction routine is currently running on
 the view
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">disk_size</code>  </td><td>
 Size in bytes of the view as stored on disk
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">language</code>  </td><td>
 Language for the defined views
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">purge_seq</code>  </td><td>
 The purge sequence that has been processed
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">signature</code>  </td><td>
 MD5 signature of the views for the design document
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">update_seq</code>  </td><td>
 The update sequence of the corresponding database that has been
 indexed
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">updater_running</code>  </td><td>
 Indicates if the view is currently being updated
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">waiting_clients</code>  </td><td>
 Number of clients waiting on views from this design document
 </td></tr><tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="literal">waiting_commit</code>  </td><td>
 Indicates if there are outstanding commits to the underlying
 database that need to processed
 </td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" title="8.9.&nbsp;GET /db/_design/design-doc/_view/view-name"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-view-viewname_get"></a>8.9.&nbsp;<code class="literal">GET /db/_design/design-doc/_view/view-name</code></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-view-viewname_get-indexes">8.9.1. Querying Views and Indexes</a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-view-viewname_get-sorting">8.9.2. Sorting Returned Rows</a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-view-viewname_get-ranges">8.9.3. Specifying Start and End Values</a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-view-viewname_get-limit">8.9.4. Using Limits and Skipping Rows</a></span></dt><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-view-viewname_get-reduction">8.9.5. View Reduction and Grouping</a></span></dt></dl></div><div class="informaltable"><table summary="URL API GET /db/_design/design-doc/_view/view-name" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_design/design-doc/_view/view-name</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the documents returned by the view
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">descending</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return the documents in descending by key order
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">endkey</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Stop returning records when the specified key is reached
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">endkey_docid</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Stop returning records when the specified document ID is
 reached
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">group</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Group the results using the reduce function to a group or
 single row
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">group_level</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Specify the group level to be used
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">include_docs</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Include the full content of the documents in the return
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">inclusive_end</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Specifies whether the specified end key should be included
 in the result
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>true</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">key</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return only documents that match the specified key
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">limit</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Limit the number of the returned documents to the specified
 number
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">reduce</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Use the reduction function
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>true</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">skip</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Skip this number of records before starting to return the
 results
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>0</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">stale</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Allow the results from a stale view to be used
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Supported Values</strong></span></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&nbsp;</td><td><code class="literal">ok</code></td><td>Allow stale views</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">startkey</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return records starting with the specified key
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">startkey_docid</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return records starting with the specified document ID
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">update_seq</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Include the update sequence in the generated results
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr></tbody></table></div><p>
      Executes the specified <code class="literal">view-name</code> from the
      specified <code class="literal">design-doc</code> design document.
    </p><div class="section" title="8.9.1.&nbsp;Querying Views and Indexes"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-design_db-design-designdoc-view-viewname_get-indexes"></a>8.9.1.&nbsp;Querying Views and Indexes</h3></div></div></div><p>
        The definition of a view within a design document also creates
        an index based on the key information defined within each view.
        The production and use of the index significantly increases the
        speed of access and searching or selecting documents from the
        view.
      </p><p>
        However, the index is not updated when new documents are added
        or modified in the database. Instead, the index is generated or
        updated, either when the view is first accessed, or when the
        view is accessed after a document has been updated. In each
        case, the index is updated before the view query is executed
        against the database.
      </p><p>
        View indexes are updated incrementally in the following
        situations:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            A new document has been added to the database.
          </p></li><li class="listitem"><p>
            A document has been deleted from the database.
          </p></li><li class="listitem"><p>
            A document in the database has been updated.
          </p></li></ul></div><p>
        View indexes are rebuilt entirely when the view definition
        changes. To achieve this, a 'fingerprint' of the view definition
        is created when the design document is updated. If the
        fingerprint changes, then the view indexes are entirely rebuilt.
        This ensures that changes to the view definitions are reflected
        in the view indexes.
      </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          View index rebuilds occur when one view from the same the view
          group (i.e. all the views defined within a single a design
          document) has been determined as needing a rebuild. For
          example, if if you have a design document with different
          views, and you update the database, all three view indexes
          within the design document will be updated.
        </p></div><p>
        Because the view is updated when it has been queried, it can
        result in a delay in returned information when the view is
        accessed, especially if there are a large number of documents in
        the database and the view index does not exist. There are a
        number of ways to mitigate, but not completely eliminate, these
        issues. These include:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            Create the view definition (and associated design documents)
            on your database before allowing insertion or updates to the
            documents. If this is allowed while the view is being
            accessed, the index can be updated incrementally.
          </p></li><li class="listitem"><p>
            Manually force a view request from the database. You can do
            this either before users are allowed to use the view, or you
            can access the view manually after documents are added or
            updated.
          </p></li><li class="listitem"><p>
            Use the <code class="literal">/db/_changes</code> method to monitor
            for changes to the database and then access the view to
            force the corresponding view index to be updated. See
            <a class="xref" href="couchdb-api-db.html#couchdb-api-db_db-changes_get" title="5.4.&nbsp;GET /db/_changes">Section&nbsp;5.4, &ldquo;<code class="literal">GET /db/_changes</code>&rdquo;</a>
            for more information.
          </p></li><li class="listitem"><p>
            Use a monitor with the
            <code class="literal">update_notification</code> section of the
            CouchDB configuration file to monitor for changes to your
            database, and trigger a view query to force the view to be
            updated. For more information, see
            <a class="xref" href="couchdb-single-configuration.html#couchdb-single-configuration-update_notification" title="12.5.&nbsp;Update Notifications">Section&nbsp;12.5, &ldquo;Update Notifications&rdquo;</a>.
          </p></li></ul></div><p>
        None of these can completely eliminate the need for the indexes
        to be rebuilt or updated when the view is accessed, but they may
        lessen the effects on end-users of the index update affecting
        the user experience.
      </p><p>
        Another alternative is to allow users to access a 'stale'
        version of the view index, rather than forcing the index to be
        updated and displaying the updated results. Using a stale view
        may not return the latest information, but will return the
        results of the view query using an existing version of the
        index.
      </p><p>
        For example, to access the existing stale view
        <code class="literal">by_recipe</code> in the <code class="literal">recipes</code>
        design document:
      </p><pre class="programlisting">http://couchdb:5984/recipes/_design/recipes/_view/by_recipe?stale=ok</pre><p>
        Accessing a stale view:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            Does not trigger a rebuild of the view indexes, even if
            there have been changes since the last access.
          </p></li><li class="listitem"><p>
            Returns the current version of the view index, if a current
            version exists.
          </p></li><li class="listitem"><p>
            Returns an empty result set if the given view index does
            exist.
          </p></li></ul></div><p>
        As an alternative, you use the <code class="literal">update_after</code>
        value to the <code class="option">stale</code> paramater. This causes the
        view to be returned as a stale view, but for the update process
        to be triggered after the view information has been returned to
        the client.
      </p><p>
        In addition to using stale views, you can also make use of the
        <code class="literal">update_seq</code> query argument. Using this query
        argument generates the view information including the update
        sequence of the database from which the view was generated. The
        returned value can be compared this to the current update
        sequence exposed in the database information (returned by
        <a class="xref" href="couchdb-api-db.html#couchdb-api-db_db_get" title="5.1.&nbsp;GET /db">Section&nbsp;5.1, &ldquo;<code class="literal">GET /db</code>&rdquo;</a>).
      </p></div><div class="section" title="8.9.2.&nbsp;Sorting Returned Rows"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-design_db-design-designdoc-view-viewname_get-sorting"></a>8.9.2.&nbsp;Sorting Returned Rows</h3></div></div></div><p>
        Each element within the returned array is sorted using native
        UTF-8 sorting according to the contents of the key portion of
        the emitted content. The basic order of output is as follows:
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
            <code class="literal">null</code>
          </p></li><li class="listitem"><p>
            <code class="literal">false</code>
          </p></li><li class="listitem"><p>
            <code class="literal">true</code>
          </p></li><li class="listitem"><p>
            Numbers
          </p></li><li class="listitem"><p>
            Text (case sensitive, lowercase first)
          </p></li><li class="listitem"><p>
            Arrays (according to the values of each element, in order)
          </p></li><li class="listitem"><p>
            Objects (according to the values of keys, in key order)
          </p></li></ul></div><p>
        You can reverse the order of the returned view information by
        using the <code class="literal">descending</code> query value set to true.
        For example, Retrieving the list of recipes using the
        <code class="literal">by_title</code> (limited to 5 records) view:
      </p><pre class="programlisting">{
   "offset" : 0,
   "rows" : [
      {
         "id" : "3-tiersalmonspinachandavocadoterrine",
         "key" : "3-tier salmon, spinach and avocado terrine",
         "value" : [
            null,
            "3-tier salmon, spinach and avocado terrine"
         ]
      },
      {
         "id" : "Aberffrawcake",
         "key" : "Aberffraw cake",
         "value" : [
            null,
            "Aberffraw cake"
         ]
      },
      {
         "id" : "Adukiandorangecasserole-microwave",
         "key" : "Aduki and orange casserole - microwave",
         "value" : [
            null,
            "Aduki and orange casserole - microwave"
         ]
      },
      {
         "id" : "Aioli-garlicmayonnaise",
         "key" : "Aioli - garlic mayonnaise",
         "value" : [
            null,
            "Aioli - garlic mayonnaise"
         ]
      },
      {
         "id" : "Alabamapeanutchicken",
         "key" : "Alabama peanut chicken",
         "value" : [
            null,
            "Alabama peanut chicken"
         ]
      }
   ],
   "total_rows" : 2667
}</pre><p>
        Requesting the same in descending order will reverse the entire
        view content. For example the request
      </p><pre class="programlisting">GET http://couchdb:5984/recipes/_design/recipes/_view/by_title?limit=5&amp;descending=true
Accept: application/json
Content-Type: application/json</pre><p>
        Returns the last 5 records from the view:
      </p><pre class="programlisting">{
   "offset" : 0,
   "rows" : [
      {
         "id" : "Zucchiniinagrodolcesweet-sourcourgettes",
         "key" : "Zucchini in agrodolce (sweet-sour courgettes)",
         "value" : [
            null,
            "Zucchini in agrodolce (sweet-sour courgettes)"
         ]
      },
      {
         "id" : "Zingylemontart",
         "key" : "Zingy lemon tart",
         "value" : [
            null,
            "Zingy lemon tart"
         ]
      },
      {
         "id" : "Zestyseafoodavocado",
         "key" : "Zesty seafood avocado",
         "value" : [
            null,
            "Zesty seafood avocado"
         ]
      },
      {
         "id" : "Zabaglione",
         "key" : "Zabaglione",
         "value" : [
            null,
            "Zabaglione"
         ]
      },
      {
         "id" : "Yogurtraita",
         "key" : "Yogurt raita",
         "value" : [
            null,
            "Yogurt raita"
         ]
      }
   ],
   "total_rows" : 2667
}</pre><p>
        The sorting direction is applied before the filtering applied
        using the <code class="literal">startkey</code> and
        <code class="literal">endkey</code> query arguments. For example the
        following query:
      </p><pre class="programlisting">GET http://couchdb:5984/recipes/_design/recipes/_view/by_ingredient?startkey=%22carrots%22&amp;endkey=%22egg%22
Accept: application/json
Content-Type: application/json</pre><p>
        Will operate correctly when listing all the matching entries
        between <span class="quote">&ldquo;<span class="quote">carrots</span>&rdquo;</span> and <code class="literal">egg</code>. If
        the order of output is reversed with the
        <code class="literal">descending</code> query argument, the view request
        will return no entries:
      </p><pre class="programlisting">GET http://couchdb:5984/recipes/_design/recipes/_view/by_ingredient?descending=true&amp;startkey=%22carrots%22&amp;endkey=%22egg%22
Accept: application/json
Content-Type: application/json</pre><p>
        The returned result is empty:
      </p><pre class="programlisting">{
   "total_rows" : 26453,
   "rows" : [],
   "offset" : 21882
}</pre><p>
        The results will be empty because the entries in the view are
        reversed before the key filter is applied, and therefore the
        <code class="literal">endkey</code> of <span class="quote">&ldquo;<span class="quote">egg</span>&rdquo;</span> will be seen
        before the <code class="literal">startkey</code> of
        <span class="quote">&ldquo;<span class="quote">carrots</span>&rdquo;</span>, resulting in an empty list.
      </p><p>
        Instead, you should reverse the values supplied to the
        <code class="literal">startkey</code> and <code class="literal">endkey</code>
        parameters to match the descending sorting applied to the keys.
        Changing the previous example to:
      </p><pre class="programlisting">GET http://couchdb:5984/recipes/_design/recipes/_view/by_ingredient?descending=true&amp;startkey=%22egg%22&amp;endkey=%22carrots%22
Accept: application/json
Content-Type: application/json</pre></div><div class="section" title="8.9.3.&nbsp;Specifying Start and End Values"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-design_db-design-designdoc-view-viewname_get-ranges"></a>8.9.3.&nbsp;Specifying Start and End Values</h3></div></div></div><p>
        The <code class="literal">startkey</code> and <code class="literal">endkey</code>
        query arguments can be used to specify the range of values to be
        displayed when querying the view.
      </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
          The values
        </p></div></div><div class="section" title="8.9.4.&nbsp;Using Limits and Skipping Rows"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-design_db-design-designdoc-view-viewname_get-limit"></a>8.9.4.&nbsp;Using Limits and Skipping Rows</h3></div></div></div><p>
        TBC
      </p></div><div class="section" title="8.9.5.&nbsp;View Reduction and Grouping"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-design_db-design-designdoc-view-viewname_get-reduction"></a>8.9.5.&nbsp;View Reduction and Grouping</h3></div></div></div><p>
        TBC
      </p></div></div><div class="section" title="8.10.&nbsp;POST /db/_design/design-doc/_view/view-name"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-view-viewname_post"></a>8.10.&nbsp;<code class="literal">POST /db/_design/design-doc/_view/view-name</code></h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-view-viewname_post-multidoc">8.10.1. Multi-document Fetching</a></span></dt></dl></div><div class="informaltable"><table summary="URL API POST /db/_design/design-doc/_view/view-name" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db/_design/design-doc/_view/view-name</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 List of keys to be returned from specified view
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 JSON of the documents returned by the view
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">descending</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return the documents in descending by key order
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">endkey</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Stop returning records when the specified key is reached
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">endkey_docid</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Stop returning records when the specified document ID is
 reached
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">group</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Group the results using the reduce function to a group or
 single row
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">group_level</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Specify the group level to be used
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">include_docs</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Include the full content of the documents in the return
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">inclusive_end</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Specifies whether the specified end key should be included
 in the result
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>true</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">key</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return only documents that match the specified key
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">limit</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Limit the number of the returned documents to the specified
 number
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">reduce</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Use the reduction function
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>true</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">skip</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Skip this number of records before starting to return the
 results
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>numeric</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>0</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">stale</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Allow the results from a stale view to be used
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Supported Values</strong></span></td><td class="auto-generated">&nbsp;</td></tr><tr><td>&nbsp;</td><td><code class="literal">ok</code></td><td>Allow stale views</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">startkey</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return records starting with the specified key
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">startkey_docid</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Return records starting with the specified document ID
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">update_seq</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Include the update sequence in the generated results
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>boolean</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Default</strong></span></td><td>false</td></tr></tbody></table></div><p>
      Executes the specified <code class="literal">view-name</code> from the
      specified <code class="literal">design-doc</code> design document. Unlike
      the <code class="literal">GET</code> method for accessing views, the
      <code class="literal">POST</code> method supports the specification of
      explicit keys to be retrieved from the view results. The remainder
      of the <code class="literal">POST</code> view functionality is identical to
      the
      <a class="xref" href="couchdb-api-design.html#couchdb-api-design_db-design-designdoc-view-viewname_get" title="8.9.&nbsp;GET /db/_design/design-doc/_view/view-name">Section&nbsp;8.9, &ldquo;<code class="literal">GET /db/_design/design-doc/_view/view-name</code>&rdquo;</a>
      fun
    </p><p>
      For example, the request below will return all the recipes where
      the key for the view matches either <span class="quote">&ldquo;<span class="quote">claret</span>&rdquo;</span> or
      <span class="quote">&ldquo;<span class="quote">clear apple cider</span>&rdquo;</span> :
    </p><pre class="programlisting">POST http://couchdb:5984/recipes/_design/recipes/_view/by_ingredient
Content-Type: application/json

{
   "keys" : [
      "claret",
      "clear apple juice"
   ]
}</pre><p>
      The returned view data contains the standard view information, but
      only where the keys match.
    </p><pre class="programlisting">{
   "total_rows" : 26484,
   "rows" : [
      {
         "value" : [
            "Scotch collops"
         ],
         "id" : "Scotchcollops",
         "key" : "claret"
      },
      {
         "value" : [
            "Stand pie"
         ],
         "id" : "Standpie",
         "key" : "clear apple juice"
      }
   ],
   "offset" : 6324
}</pre><div class="section" title="8.10.1.&nbsp;Multi-document Fetching"><div class="titlepage"><div><div><h3 class="title"><a name="couchdb-api-design_db-design-designdoc-view-viewname_post-multidoc"></a>8.10.1.&nbsp;Multi-document Fetching</h3></div></div></div><p>
        By combining the <code class="literal">POST</code> method to a given view
        with the <code class="literal">include_docs=true</code> query argument you
        can obtain multiple documents from a database. The result is
        more efficient than using multiple
        <a class="xref" href="couchdb-api-dbdoc.html#couchdb-api-dbdoc_db-doc_get" title="6.2.&nbsp;GET /db/doc">Section&nbsp;6.2, &ldquo;<code class="literal">GET /db/doc</code>&rdquo;</a>
        requests.
      </p><p>
        For example, sending the following request for ingredients
        matching <span class="quote">&ldquo;<span class="quote">claret</span>&rdquo;</span> and <span class="quote">&ldquo;<span class="quote">clear apple
        juice</span>&rdquo;</span>:
      </p><pre class="programlisting">POST http://couchdb:5984/recipes/_design/recipes/_view/by_ingredient?include_docs=true
Content-Type: application/json

{
   "keys" : [
      "claret",
      "clear apple juice"
   ]
}</pre><p>
        Returns the full document for each recipe:
      </p><pre class="programlisting">{
   "offset" : 6324,
   "rows" : [
      {
         "doc" : {
            "_id" : "Scotchcollops",
            "_rev" : "1-bcbdf724f8544c89697a1cbc4b9f0178",
            "cooktime" : "8",
            "ingredients" : [
               {
                  "ingredient" : "onion",
                  "ingredtext" : "onion, peeled and chopped",
                  "meastext" : "1"
               },
            ...
            ],
            "keywords" : [
               "cook method.hob, oven, grill@hob",
               "diet@wheat-free",
               "diet@peanut-free",
               "special collections@classic recipe",
               "cuisine@british traditional",
               "diet@corn-free",
               "diet@citrus-free",
               "special collections@very easy",
               "diet@shellfish-free",
               "main ingredient@meat",
               "occasion@christmas",
               "meal type@main",
               "diet@egg-free",
               "diet@gluten-free"
            ],
            "preptime" : "10",
            "servings" : "4",
            "subtitle" : "This recipe comes from an old recipe book of 1683 called 'The Gentlewoman's Kitchen'. This is an excellent way of making a rich and full-flavoured meat dish in a very short time.",
            "title" : "Scotch collops",
            "totaltime" : "18"
         },
         "id" : "Scotchcollops",
         "key" : "claret",
         "value" : [
            "Scotch collops"
         ]
      },
      {
         "doc" : {
            "_id" : "Standpie",
            "_rev" : "1-bff6edf3ca2474a243023f2dad432a5a",
            "cooktime" : "92",
            "ingredients" : [
...            ],
            "keywords" : [
               "diet@dairy-free",
               "diet@peanut-free",
               "special collections@classic recipe",
               "cuisine@british traditional",
               "diet@corn-free",
               "diet@citrus-free",
               "occasion@buffet party",
               "diet@shellfish-free",
               "occasion@picnic",
               "special collections@lunchbox",
               "main ingredient@meat",
               "convenience@serve with salad for complete meal",
               "meal type@main",
               "cook method.hob, oven, grill@hob / oven",
               "diet@cow dairy-free"
            ],
            "preptime" : "30",
            "servings" : "6",
            "subtitle" : "Serve this pie with pickled vegetables and potato salad.",
            "title" : "Stand pie",
            "totaltime" : "437"
         },
         "id" : "Standpie",
         "key" : "clear apple juice",
         "value" : [
            "Stand pie"
         ]
      }
   ],
   "total_rows" : 26484
}</pre></div></div><div class="section" title="8.11.&nbsp;POST /db/_design/design-doc/_show/show-name"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-show-showname_get"></a>8.11.&nbsp;<code class="literal">POST /db/_design/design-doc/_show/show-name</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/_design/design-doc/_show/show-name" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_design/design-doc/_show/show-name</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Returns the result of the show
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr><tr><td><span class="bold"><strong>Query Arguments</strong></span></td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">details</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Indicates whether details should be included
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Argument</strong></span></td><td><code class="literal">format</code></td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Description</strong></span></td><td>
 Format of the returned information
 </td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Optional</strong></span></td><td>yes</td></tr><tr><td>&nbsp;</td><td><span class="bold"><strong>Type</strong></span></td><td>string</td></tr></tbody></table></div><p></p></div><div class="section" title="8.12.&nbsp;POST /db/_design/design-doc/_show/show-name/doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-show-showname-doc_get"></a>8.12.&nbsp;<code class="literal">POST /db/_design/design-doc/_show/show-name/doc</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/_design/design-doc/_show/show-name/doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_design/design-doc/_show/show-name/doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 None
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Returns the show for the given document
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div><p></p></div><div class="section" title="8.13.&nbsp;GET /db/_design/design-doc/_list/list-name/other-design-doc/view-name"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-list-listname-otherdesigndoc-viewname_get"></a>8.13.&nbsp;<code class="literal">GET
      /db/_design/design-doc/_list/list-name/other-design-doc/view-name</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/_design/design-doc/_list/list-name/other-design-doc/view-name" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_design/design-doc/_list/list-name/other-design-doc/view-name</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div></div><div class="section" title="8.14.&nbsp;POST /db/_design/design-doc/_list/list-name/other-design-doc/view-name"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-list-listname-otherdesigndoc-viewname_post"></a>8.14.&nbsp;<code class="literal">POST
      /db/_design/design-doc/_list/list-name/other-design-doc/view-name</code></h2></div></div></div><div class="informaltable"><table summary="URL API POST /db/_design/design-doc/_list/list-name/other-design-doc/view-name" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db/_design/design-doc/_list/list-name/other-design-doc/view-name</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div></div><div class="section" title="8.15.&nbsp;GET /db/_design/design-doc/_list/list-name/view-name"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-list-listname-viewname_get"></a>8.15.&nbsp;<code class="literal">GET /db/_design/design-doc/_list/list-name/view-name</code></h2></div></div></div><div class="informaltable"><table summary="URL API GET /db/_design/design-doc/_list/list-name/view-name" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">GET /db/_design/design-doc/_list/list-name/view-name</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div></div><div class="section" title="8.16.&nbsp;POST /db/_design/design-doc/_list/list-name/view-name"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-list-listname-viewname_post"></a>8.16.&nbsp;<code class="literal">POST /db/_design/design-doc/_list/list-name/view-name</code></h2></div></div></div><div class="informaltable"><table summary="URL API POST /db/_design/design-doc/_list/list-name/view-name" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db/_design/design-doc/_list/list-name/view-name</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div></div><div class="section" title="8.17.&nbsp;PUT /db/_design/design-doc/_update/updatename/doc"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-update-updatename-doc_put"></a>8.17.&nbsp;<code class="literal">PUT /db/_design/design-doc/_update/updatename/doc</code></h2></div></div></div><div class="informaltable"><table summary="URL API PUT /db/_design/design-doc/_update/update-name/doc" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">PUT /db/_design/design-doc/_update/update-name/doc</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 Document update information
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Updated document
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div></div><div class="section" title="8.18.&nbsp;POST /db/_design/design-doc/_update/updatename"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-update-updatename_post"></a>8.18.&nbsp;<code class="literal">POST /db/_design/design-doc/_update/updatename</code></h2></div></div></div><div class="informaltable"><table summary="URL API POST /db/_design/design-doc/_update/update-name" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">POST /db/_design/design-doc/_update/update-name</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 Document update information
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 Updated document
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div></div><div class="section" title="8.19.&nbsp;ALL /db/_design/design-doc/_rewrite/rewrite-name/anything"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="couchdb-api-design_db-design-designdoc-rewrite-rewritename-anything"></a>8.19.&nbsp;<code class="literal">ALL
      /db/_design/design-doc/_rewrite/rewrite-name/anything</code></h2></div></div></div><div class="informaltable"><table summary="URL API ALL /db/_design/design-doc/_rewrite/rewrite-name/anything" border="1"><colgroup><col class="field" width="33%"><col class="info" width="33%"><col class="addinfo" width="34%"></colgroup><tbody><tr><td><span class="bold"><strong>Method</strong></span></td><td colspan="2"><code class="literal">ALL /db/_design/design-doc/_rewrite/rewrite-name/anything</code></td></tr><tr><td><span class="bold"><strong>Request</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Response</strong></span></td><td colspan="2">
 TBC
 </td></tr><tr><td><span class="bold"><strong>Admin Privileges Required</strong></span></td><td colspan="2">no</td></tr></tbody></table></div></div></div><div class="navfooter"><hr><table summary="Navigation footer" width="100%"><tr><td align="left" width="40%"><a accesskey="p" href="couchdb-api-localdb.html">Prev</a>&nbsp;</td><td align="center" width="20%">&nbsp;</td><td align="right" width="40%">&nbsp;<a accesskey="n" href="couchdb-api-misc.html">Next</a></td></tr><tr><td valign="top" align="left" width="40%">Chapter&nbsp;7.&nbsp;CouchDB API Server Local (non-replicating) Document Methods&nbsp;</td><td align="center" width="20%"><a accesskey="h" href="index.html">Home</a></td><td valign="top" align="right" width="40%">&nbsp;Chapter&nbsp;9.&nbsp;CouchDB API Server Miscellaneous Methods</td></tr></table></div></body></html>